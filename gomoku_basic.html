<!DOCTYPE html>
<html>
<head>
    <title>äº”å­æ£‹</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
            background: #f5f5f5;
        }
        
        h1 {
            color: #333;
        }
        
        .game-info {
            margin: 20px 0;
            font-size: 18px;
            font-weight: bold;
        }
        
        .board {
            display: inline-block;
            background: #deb887;
            border: 3px solid #8b4513;
            padding: 10px;
            border-radius: 10px;
        }
        
        .row {
            display: flex;
        }
        
        .cell {
            width: 35px;
            height: 35px;
            border: 1px solid #8b4513;
            background: #f4e4bc;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
        }
        
        .cell:hover {
            background: #e6d3a3;
        }
        
        .controls {
            margin: 20px 0;
        }
        
        button {
            padding: 10px 20px;
            font-size: 16px;
            margin: 5px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            background: #007bff;
            color: white;
        }
        
        button:hover {
            background: #0056b3;
        }
        
        .btn-test {
            background: #28a745;
        }
        
        .btn-test:hover {
            background: #218838;
        }

        /* æ£‹å­æ¨£å¼ */
        .stone {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: 2px solid #333;
            box-shadow: 0 2px 6px rgba(0,0,0,0.4);
            position: relative;
        }

        .stone.black {
            background: radial-gradient(circle at 30% 30%, #555, #000);
            border-color: #222;
        }

        .stone.white {
            background: radial-gradient(circle at 30% 30%, #fff, #ddd);
            border-color: #666;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3), inset 0 1px 3px rgba(255,255,255,0.8);
        }
    </style>
</head>
<body>
    <h1>äº”å­æ£‹éŠæˆ²</h1>
    
    <div class="controls">
        <button class="btn-test" onclick="testFunction()">ğŸ§ª æ¸¬è©¦æŒ‰éˆ•</button>
        <button onclick="startGame()">ğŸ® é–‹å§‹éŠæˆ²</button>
        <button onclick="resetGame()">ğŸ”„ é‡ç½®éŠæˆ²</button>
    </div>
    
    <div class="game-info" id="gameInfo">é»æ“Šã€Œæ¸¬è©¦æŒ‰éˆ•ã€ç¢ºèªåŠŸèƒ½æ­£å¸¸</div>
    
    <div class="board" id="gameBoard">
        <!-- æ£‹ç›¤å°‡åœ¨é€™è£¡ç”Ÿæˆ -->
    </div>

    <script>
        // å…¨å±€è®Šé‡
        var board = [];
        var currentPlayer = 1; // 1=é»‘æ£‹(â—), 2=ç™½æ£‹(â—‹)
        var gameStarted = false;

        // æ¸¬è©¦å‡½æ•¸
        function testFunction() {
            alert('ğŸ‰ æ­å–œï¼æŒ‰éˆ•åŠŸèƒ½æ­£å¸¸ï¼\n\nç¾åœ¨ä½ å¯ä»¥é–‹å§‹éŠæˆ²äº†ï¼');
            document.getElementById('gameInfo').innerHTML = 'âœ… æ¸¬è©¦æˆåŠŸï¼é»æ“Šã€Œé–‹å§‹éŠæˆ²ã€';
            console.log('æ¸¬è©¦å‡½æ•¸åŸ·è¡ŒæˆåŠŸ');
        }

        // é–‹å§‹éŠæˆ²
        function startGame() {
            console.log('é–‹å§‹éŠæˆ²');
            gameStarted = true;
            currentPlayer = 1;
            
            // åˆå§‹åŒ–æ£‹ç›¤æ•¸æ“š
            board = [];
            for (var i = 0; i < 15; i++) {
                board[i] = [];
                for (var j = 0; j < 15; j++) {
                    board[i][j] = 0;
                }
            }
            
            createBoard();
            updateGameInfo();
        }

        // å‰µå»ºæ£‹ç›¤
        function createBoard() {
            var gameBoard = document.getElementById('gameBoard');
            gameBoard.innerHTML = '';
            
            for (var row = 0; row < 15; row++) {
                var rowDiv = document.createElement('div');
                rowDiv.className = 'row';
                
                for (var col = 0; col < 15; col++) {
                    var cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.onclick = function() {
                        var r = parseInt(this.dataset.row);
                        var c = parseInt(this.dataset.col);
                        clickCell(r, c);
                    };
                    cell.dataset.row = row;
                    cell.dataset.col = col;
                    rowDiv.appendChild(cell);
                }
                
                gameBoard.appendChild(rowDiv);
            }
        }

        // é»æ“Šæ ¼å­
        function clickCell(row, col) {
            console.log('é»æ“Šæ ¼å­: ' + row + ',' + col);
            
            if (!gameStarted) {
                alert('è«‹å…ˆé»æ“Šã€Œé–‹å§‹éŠæˆ²ã€ï¼');
                return;
            }
            
            if (board[row][col] !== 0) {
                alert('é€™å€‹ä½ç½®å·²ç¶“æœ‰æ£‹å­äº†ï¼');
                return;
            }
            
            // ä¸‹æ£‹
            board[row][col] = currentPlayer;
            
            // æ›´æ–°é¡¯ç¤º - å‰µå»ºå¯¦é«”æ£‹å­
            var cell = document.querySelector('[data-row="' + row + '"][data-col="' + col + '"]');
            var stone = document.createElement('div');
            stone.className = 'stone ' + (currentPlayer === 1 ? 'black' : 'white');
            cell.innerHTML = '';
            cell.appendChild(stone);
            
            // æª¢æŸ¥å‹åˆ©
            if (checkWin(row, col)) {
                var winner = currentPlayer === 1 ? 'é»‘æ£‹' : 'ç™½æ£‹';
                alert('ğŸ‰ ' + winner + ' ç²å‹ï¼');
                document.getElementById('gameInfo').innerHTML = 'ğŸ† ' + winner + ' ç²å‹ï¼é»æ“Šé‡ç½®é–‹å§‹æ–°éŠæˆ²';
                gameStarted = false;
                return;
            }
            
            // åˆ‡æ›ç©å®¶
            currentPlayer = currentPlayer === 1 ? 2 : 1;
            updateGameInfo();
        }

        // æª¢æŸ¥å‹åˆ©
        function checkWin(row, col) {
            var player = board[row][col];
            var directions = [[0,1], [1,0], [1,1], [1,-1]];
            
            for (var d = 0; d < directions.length; d++) {
                var dx = directions[d][0];
                var dy = directions[d][1];
                var count = 1;
                
                // æ­£æ–¹å‘æª¢æŸ¥
                for (var i = 1; i < 5; i++) {
                    var newRow = row + dx * i;
                    var newCol = col + dy * i;
                    if (newRow < 0 || newRow >= 15 || newCol < 0 || newCol >= 15) break;
                    if (board[newRow][newCol] !== player) break;
                    count++;
                }
                
                // è² æ–¹å‘æª¢æŸ¥
                for (var i = 1; i < 5; i++) {
                    var newRow = row - dx * i;
                    var newCol = col - dy * i;
                    if (newRow < 0 || newRow >= 15 || newCol < 0 || newCol >= 15) break;
                    if (board[newRow][newCol] !== player) break;
                    count++;
                }
                
                if (count >= 5) return true;
            }
            
            return false;
        }

        // æ›´æ–°éŠæˆ²ä¿¡æ¯
        function updateGameInfo() {
            var playerName = currentPlayer === 1 ? 'é»‘æ£‹ â—' : 'ç™½æ£‹ â—‹';
            document.getElementById('gameInfo').innerHTML = 'è¼ªåˆ° ' + playerName + ' ä¸‹æ£‹';
        }

        // é‡ç½®éŠæˆ²
        function resetGame() {
            console.log('é‡ç½®éŠæˆ²');
            gameStarted = false;
            document.getElementById('gameInfo').innerHTML = 'é»æ“Šã€Œé–‹å§‹éŠæˆ²ã€é–‹å§‹æ–°çš„å°å±€';
            document.getElementById('gameBoard').innerHTML = '';
        }

        // é é¢è¼‰å…¥å®Œæˆ
        window.onload = function() {
            console.log('é é¢è¼‰å…¥å®Œæˆ');
            document.getElementById('gameInfo').innerHTML = 'ğŸ‘‹ æ­¡è¿ï¼é»æ“Šã€Œæ¸¬è©¦æŒ‰éˆ•ã€ç¢ºèªåŠŸèƒ½';
        };
    </script>
</body>
</html>